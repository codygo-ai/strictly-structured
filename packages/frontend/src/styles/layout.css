/* ==========================================================================
   Validator / site pages – layout and component styles using design tokens
   ========================================================================== */
.validator-page {
  /* Base styles (background/color) inherited from body in base.css.
     This class is kept as a CSS scoping prefix for child selectors. */
}

.validator-header {
  background: var(--ds-surface);
  border-bottom: 1px solid var(--ds-border);
  padding: 1.5rem var(--ds-content-x);
}

.validator-title {
  font-size: 1.967rem;
  font-weight: 600;
  color: var(--ds-primary);
  letter-spacing: -0.02em;
}

.validator-subtitle {
  color: var(--ds-secondary);
  font-size: 0.9rem;
  font-weight: 400;
}

.validator-page .editor-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: var(--ds-page);
  min-width: 0;
  min-height: 0;
}

.validator-page .editor-header {
  padding: var(--ds-content-y) var(--ds-content-x) 1rem;
  background: var(--ds-page);
  border-bottom: 1px solid var(--ds-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.validator-page .editor-label {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--ds-muted);
  font-weight: 600;
}

.validator-page .editor-container {
  flex: 1;
  padding: 0.5rem 0.5rem 0.5rem;
  overflow: hidden;
  position: relative;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* Editor bottom bar */
.validator-page .editor-bottom-bar {
  padding: 0.5rem var(--ds-content-x);
  text-align: center;
  font-size: 0.8rem;
  flex-shrink: 0;
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: 0 0 0.5rem 0.5rem;
}

.editor-bottom-trigger {
  background: none;
  border: none;
  padding: 0;
  font: inherit;
  color: var(--ds-accent);
  cursor: pointer;
  text-decoration: underline;
  text-decoration-style: dotted;
  text-underline-offset: 2px;
  transition: color var(--ds-duration);
}
.editor-bottom-trigger:hover {
  color: var(--ds-accent-hover);
}

.editor-bottom-popover {
  position: absolute;
  bottom: calc(100% + 6px);
  left: 50%;
  transform: translateX(-50%);
  top: auto;
  right: auto;
  margin-top: 0;
}

.validator-page .sidebar {
  background: var(--ds-surface);
  border-left: 1px solid var(--ds-border);
  width: var(--ds-sidebar-width);
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
}

.validator-page .sidebar-resize-handle {
  position: absolute;
  top: 0;
  left: -3px;
  width: 6px;
  height: 100%;
  cursor: col-resize;
  touch-action: none;
  z-index: 10;
  background-color: transparent;
  transition: background-color var(--ds-duration);
}

.validator-page .sidebar-resize-handle:hover,
.validator-page .sidebar-resize-handle:active {
  background-color: var(--ds-accent);
  opacity: 0.4;
}

.validator-page code {
  background: var(--ds-code-bg);
  padding: 0.125rem 0.375rem;
  border-radius: 3px;
  font-size: 0.9em;
  color: var(--ds-accent);
}

/* ==========================================================================
   Compatibility Dashboard
   ========================================================================== */
.validator-page .status-cards {
  display: flex;
  gap: 0.25rem;
  padding: 0.375rem 0.375rem;
  background: var(--ds-surface);
  border-bottom: 1px solid var(--ds-border);
  flex-shrink: 0;
}

.validator-page .status-card {
  flex: 1;
  cursor: pointer;
  padding: 0.5rem 0.5rem;
  border-radius: var(--ds-radius-sm);
  border: 1px solid transparent;
  background: transparent;
  transition: border-color var(--ds-duration), background-color var(--ds-duration);
  display: flex;
  flex-direction: column;
  gap: 0.125rem;
  text-align: center;
  align-items: center;
}

.validator-page .status-card:hover {
  background: var(--ds-surface-hover);
}

.validator-page .status-card.selected {
  border-color: var(--ds-accent);
  background: var(--ds-surface-active);
}

.validator-page .status-card .status-card-provider {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--ds-muted);
}

.validator-page .status-card.selected .status-card-provider {
  font-weight: 600;
  color: var(--ds-primary);
}

.validator-page .status-card .status-card-status {
  font-size: 0.7rem;
  font-weight: 500;
  margin-top: 0.125rem;
  opacity: 0.5;
}

.validator-page .status-card.selected .status-card-status {
  opacity: 1;
}

.validator-page .status-card .status-card-status.ok { color: var(--ds-success); }
.validator-page .status-card .status-card-status.error { color: var(--ds-error); }
.validator-page .status-card .status-card-status.warning { color: var(--ds-warning); }
.validator-page .status-card .status-card-status.neutral { color: var(--ds-muted); }

/* Dashboard tabs */
.validator-page .dashboard-tabs {
  display: flex;
  border-bottom: 1px solid var(--ds-border);
  background: var(--ds-surface);
  flex-shrink: 0;
  padding: 0;
  gap: 0;
}

.validator-page .dashboard-tab {
  flex: 1;
  padding: 0.625rem 1rem;
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--ds-muted);
  text-align: center;
  cursor: pointer;
  border: none;
  background: transparent;
  border-bottom: 1px solid transparent;
  border-radius: 0;
  transition: color var(--ds-duration), border-color var(--ds-duration), background-color var(--ds-duration);
}

.validator-page .dashboard-tab:hover {
  color: var(--ds-secondary);
  background: var(--ds-surface-hover);
}

.validator-page .dashboard-tab.active {
  color: var(--ds-accent);
  border-bottom-color: var(--ds-accent);
  font-weight: 600;
  background: var(--ds-page);
}

.validator-page .dashboard-tab-content {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  padding: var(--ds-content-y);
  background: var(--ds-page);
}

/* ==========================================================================
   Issues card — unified card container for all IssuesTab states
   ========================================================================== */
.validator-page .issues-card {
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: var(--ds-radius-md);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.validator-page .issues-card-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--ds-border);
  font-size: 0.8rem;
  font-weight: 600;
}

.validator-page .issues-card-header .status-icon {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  font-weight: 700;
  flex-shrink: 0;
}

.validator-page .issues-card-header .status-icon.error {
  background: rgba(220, 53, 69, 0.12);
  color: var(--ds-error);
}

.validator-page .issues-card-header .status-icon.success {
  background: rgba(92, 184, 92, 0.12);
  color: var(--ds-success);
}

.validator-page .issues-card-header .status-icon.mixed {
  background: rgba(91, 143, 199, 0.12);
  color: var(--ds-accent);
}

.validator-page .issues-card-header .status-text {
  flex: 1;
}

.validator-page .issues-card-header .status-text .label {
  color: var(--ds-primary);
}

.validator-page .issues-card-header .status-text .sublabel {
  font-weight: 400;
  color: var(--ds-muted);
  font-size: 0.7rem;
}

.validator-page .issues-card-content {
  padding: 0.75rem 1rem;
  flex: 1;
}

.validator-page .issues-card-footer {
  padding: 0.625rem 1rem;
  border-top: 1px solid var(--ds-border);
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: var(--ds-surface-subtle);
}

.validator-page .issues-card-footer .footer-spacer {
  flex: 1;
}

/* Cross-rule-set banner (yellow — shown after fix when other rule sets have issues) */
.validator-page .cross-ruleset-banner {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: var(--ds-cell-warn-bg);
  border: 1px solid rgba(240, 173, 78, 0.25);
  border-radius: var(--ds-radius-sm);
  font-size: 0.7rem;
  color: var(--ds-cell-warn-text);
  margin-bottom: 0.75rem;
  line-height: 1.4;
}

/* Context banner (blue — shown on rule set switch after fix) */
.validator-page .context-banner {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: var(--ds-accent-bg);
  border: 1px solid var(--ds-accent-muted);
  border-radius: var(--ds-radius-sm);
  font-size: 0.7rem;
  color: var(--ds-secondary);
  margin-bottom: 0.75rem;
  line-height: 1.4;
}

/* Rule set chips (inline status pills in cross-rule-set banner) */
.validator-page .ruleset-chips {
  display: flex;
  gap: 0.375rem;
  flex-wrap: wrap;
  margin-top: 0.375rem;
}

.validator-page .ruleset-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.65rem;
  font-weight: 600;
  padding: 0.125rem 0.5rem;
  border-radius: 100px;
  white-space: nowrap;
  border: none;
  cursor: pointer;
  font-family: inherit;
  transition: filter var(--ds-duration);
}

.validator-page .ruleset-chip:hover {
  filter: brightness(0.95);
}

.validator-page .ruleset-chip.ok {
  background: var(--ds-pill-supported-bg);
  color: var(--ds-pill-supported-text);
}

.validator-page .ruleset-chip.error {
  background: var(--ds-pill-unsupported-bg);
  color: var(--ds-pill-unsupported-text);
}

/* Fix summary bar */
.validator-page .fix-summary-bar {
  display: flex;
  gap: 1rem;
  align-items: center;
  padding: 0.5rem 0.75rem;
  background: var(--ds-surface-subtle);
  border-radius: var(--ds-radius-sm);
  margin-bottom: 0.75rem;
  font-size: 0.75rem;
}

.validator-page .fix-summary-stat {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  font-weight: 600;
}

.validator-page .fix-summary-stat.applied { color: var(--ds-success); }
.validator-page .fix-summary-stat.unresolved { color: var(--ds-error); }

/* Fix result rows */
.validator-page .fix-result-label {
  font-size: 0.7rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  margin-bottom: 0.375rem;
}

.validator-page .fix-result-label.applied { color: var(--ds-cell-ok-text); }
.validator-page .fix-result-label.unresolved { color: var(--ds-cell-fail-text); }

.validator-page .fix-result-row {
  display: flex;
  gap: 0.5rem;
  align-items: flex-start;
  font-size: 0.75rem;
  padding: 0.3rem 0;
  line-height: 1.5;
}

.validator-page .fix-result-row .fix-icon {
  flex-shrink: 0;
  width: 1rem;
  text-align: center;
  font-weight: 600;
}

.validator-page .fix-result-row .fix-icon.applied { color: var(--ds-success); }
.validator-page .fix-result-row .fix-icon.info-lost { color: var(--ds-warning); }
.validator-page .fix-result-row .fix-icon.unresolved { color: var(--ds-error); }

.validator-page .fix-result-row .fix-desc {
  color: var(--ds-secondary);
}

.validator-page .fix-result-row .fix-note {
  color: var(--ds-muted);
  font-style: italic;
}

.validator-page .fix-divider {
  border: none;
  border-top: 1px solid var(--ds-border);
  margin: 0.5rem 0;
}

/* Compatible hero */
.validator-page .compatible-hero {
  text-align: center;
  padding: 1.5rem 1rem 1rem;
}

.validator-page .compatible-hero .hero-icon {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: rgba(92, 184, 92, 0.1);
  color: var(--ds-success);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  margin-bottom: 0.75rem;
}

.validator-page .compatible-hero .hero-title {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--ds-primary);
  margin-bottom: 0.25rem;
}

.validator-page .compatible-hero .hero-subtitle {
  font-size: 0.75rem;
  color: var(--ds-muted);
  margin-bottom: 1rem;
}

/* Model pills */
.validator-page .model-pills {
  display: flex;
  gap: 0.375rem;
  justify-content: center;
  flex-wrap: wrap;
}

.validator-page .model-pill {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.7rem;
  font-weight: 500;
  padding: 0.25rem 0.625rem;
  border-radius: 100px;
  background: var(--ds-pill-supported-bg);
  color: var(--ds-pill-supported-text);
}

.validator-page .model-pill .pill-dot {
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background: currentColor;
  opacity: 0.5;
}

/* Server validation section */
.validator-page .server-validate-section {
  border-top: 1px solid var(--ds-border);
  padding: 0.75rem 1rem;
  background: var(--ds-surface-subtle);
}

.validator-page .server-validate-label {
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--ds-muted);
  margin-bottom: 0.5rem;
}

.validator-page .server-validate-hint {
  font-size: 0.7rem;
  color: var(--ds-muted);
  line-height: 1.4;
  margin-bottom: 0.5rem;
}

.validator-page .server-validate-loading {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.7rem;
  color: var(--ds-muted);
  padding: 0.5rem 0;
}

.validator-page .server-validate-spinner {
  width: 14px;
  height: 14px;
  border: 2px solid var(--ds-border);
  border-top-color: var(--ds-accent);
  border-radius: 50%;
  animation: ssv-spin 0.6s linear infinite;
}

@keyframes ssv-spin { to { transform: rotate(360deg); } }

.validator-page .server-result-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.7rem;
  padding: 0.375rem 0.625rem;
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: var(--ds-radius-sm);
}

.validator-page .server-result-row + .server-result-row {
  margin-top: 0.375rem;
}

.validator-page .server-result-model {
  font-weight: 500;
  color: var(--ds-primary);
  flex: 1;
}

.validator-page .server-result-status {
  font-size: 0.65rem;
  font-weight: 600;
  padding: 0.125rem 0.5rem;
  border-radius: 100px;
}

.validator-page .server-result-status.ok {
  background: var(--ds-pill-supported-bg);
  color: var(--ds-pill-supported-text);
}

.validator-page .server-result-status.fail {
  background: var(--ds-pill-unsupported-bg);
  color: var(--ds-pill-unsupported-text);
}

.validator-page .server-result-latency {
  font-size: 0.6rem;
  color: var(--ds-muted);
  min-width: 3rem;
  text-align: right;
}

.validator-page .server-result-error {
  font-size: 0.65rem;
  color: var(--ds-error);
  padding: 0.25rem 0.625rem;
  line-height: 1.4;
}

/* Schema action label (in card footer) */
.validator-page .schema-action-label {
  font-size: 0.6rem;
  color: var(--ds-muted);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  font-weight: 600;
}

/* Issue rows */
.validator-page .issue-row {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  padding: 0.5rem 0;
  font-size: 0.8rem;
  line-height: 1.5;
}

.validator-page .issue-row + .issue-row {
  border-top: 1px solid var(--ds-border);
}

.validator-page .issue-row .issue-line {
  font-size: 0.7rem;
  font-family: ui-monospace, monospace;
  color: var(--ds-muted);
  cursor: pointer;
  white-space: nowrap;
  flex-shrink: 0;
  background: none;
  padding: 0;
  border: none;
  transition: color var(--ds-duration);
}

.validator-page .issue-row .issue-line:hover {
  color: var(--ds-accent);
  text-decoration: underline;
}

.validator-page .issue-row .issue-message {
  color: var(--ds-secondary);
}

/* Editor toolbar */
.validator-page .editor-toolbar {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.5rem var(--ds-content-x);
  background: var(--ds-page);
  flex-shrink: 0;
}

/* Examples dropdown */
.validator-page .examples-dropdown {
  position: absolute;
  bottom: 100%;
  left: 0;
  margin-bottom: 0.25rem;
  min-width: 14rem;
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: var(--ds-radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  z-index: 20;
  overflow: hidden;
}

.validator-page .examples-dropdown button {
  display: block;
  width: 100%;
  text-align: left;
  padding: 0.5rem 0.75rem;
  font-size: 0.8rem;
  color: var(--ds-primary);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: background-color var(--ds-duration);
}

.validator-page .examples-dropdown button:hover {
  background: var(--ds-surface-hover);
}

.validator-page .examples-dropdown button .examples-desc {
  display: block;
  font-size: 0.7rem;
  color: var(--ds-muted);
  margin-top: 0.125rem;
}

/* Examples dropdown (editor header) */
.validator-page .examples-dropdown-header {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 0.25rem;
  min-width: 14rem;
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: var(--ds-radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  z-index: 20;
  overflow: hidden;
}

.validator-page .examples-dropdown-header button.load-upload {
  font-weight: 600;
  color: var(--ds-accent);
}

.validator-page .examples-dropdown-divider {
  height: 1px;
  background: var(--ds-border);
  margin: 0.25rem 0;
}

.validator-page .examples-dropdown-section-label {
  padding: 0.375rem 0.75rem 0.125rem;
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--ds-muted);
}

.validator-page .examples-samples-section {
  opacity: 0.45;
  transition: opacity var(--ds-duration);
}
.validator-page .examples-samples-section:hover {
  opacity: 1;
}

.validator-page .examples-samples-scroll {
  max-height: 260px;
  overflow-y: auto;
}

.validator-page .examples-sample-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.5rem;
}

.validator-page .examples-providers {
  display: inline-flex;
  gap: 0.25rem;
  flex-shrink: 0;
}

.validator-page .examples-provider-tag {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}
.validator-page .examples-provider-tag.none {
  background: var(--ds-cell-fail-bg);
  color: var(--ds-cell-fail-text);
}

.validator-page .examples-dropdown-header button {
  display: block;
  width: 100%;
  text-align: left;
  padding: 0.5rem 0.75rem;
  font-size: 0.8rem;
  color: var(--ds-primary);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: background-color var(--ds-duration);
}

.validator-page .examples-dropdown-header button:hover {
  background: var(--ds-surface-hover);
}

.validator-page .examples-dropdown-header button .examples-desc {
  display: block;
  font-size: 0.7rem;
  color: var(--ds-muted);
  margin-top: 0.125rem;
}

/* Feedback popover */
.feedback-popover {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 0.5rem;
  width: 20rem;
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: var(--ds-radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  z-index: 50;
}

/* Help popover */
.help-popover {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 0.5rem;
  width: 18rem;
  padding: 1rem 1.125rem;
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: var(--ds-radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  z-index: 50;
}

/* Onboarding hint */
.validator-page .onboarding-hint {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem var(--ds-content-x);
  background: var(--ds-accent-bg);
  border-bottom: 1px solid var(--ds-border);
  font-size: 0.8rem;
  color: var(--ds-secondary);
  flex-shrink: 0;
}

.validator-page .onboarding-hint button {
  color: var(--ds-muted);
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 0.875rem;
  padding: 0 0.25rem;
}

.validator-page .onboarding-hint button:hover {
  color: var(--ds-primary);
}

/* ==========================================================================
   Tooltip
   ========================================================================== */
.tooltip-trigger {
  position: relative;
  display: inline-flex;
}

.tooltip-trigger::after {
  content: attr(data-tooltip);
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(4px);
  padding: 0.375rem 0.625rem;
  font-size: 0.75rem;
  font-weight: 500;
  line-height: 1;
  white-space: nowrap;
  color: var(--ds-surface);
  background: var(--ds-primary);
  border-radius: var(--ds-radius-sm);
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--ds-duration) ease, transform var(--ds-duration) ease;
  z-index: 60;
}

.tooltip-trigger::before {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  border: 4px solid transparent;
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--ds-duration) ease;
  z-index: 60;
}

/* Top (default) */
.tooltip-trigger[data-tooltip-pos="top"]::after,
.tooltip-trigger:not([data-tooltip-pos])::after {
  bottom: 100%;
  transform: translateX(-50%) translateY(4px);
}

.tooltip-trigger[data-tooltip-pos="top"]::before,
.tooltip-trigger:not([data-tooltip-pos])::before {
  bottom: 100%;
  border-top-color: var(--ds-primary);
  margin-bottom: -4px;
}

/* Bottom */
.tooltip-trigger[data-tooltip-pos="bottom"]::after {
  top: 100%;
  transform: translateX(-50%) translateY(-4px);
}

.tooltip-trigger[data-tooltip-pos="bottom"]::before {
  top: 100%;
  border-bottom-color: var(--ds-primary);
  margin-top: -4px;
}

/* Show on hover / focus-within */
.tooltip-trigger:hover::after,
.tooltip-trigger:focus-within::after {
  opacity: 1;
}

.tooltip-trigger[data-tooltip-pos="top"]:hover::after,
.tooltip-trigger[data-tooltip-pos="top"]:focus-within::after,
.tooltip-trigger:not([data-tooltip-pos]):hover::after,
.tooltip-trigger:not([data-tooltip-pos]):focus-within::after {
  transform: translateX(-50%) translateY(-4px);
}

.tooltip-trigger[data-tooltip-pos="bottom"]:hover::after,
.tooltip-trigger[data-tooltip-pos="bottom"]:focus-within::after {
  transform: translateX(-50%) translateY(4px);
}

.tooltip-trigger:hover::before,
.tooltip-trigger:focus-within::before {
  opacity: 1;
}
