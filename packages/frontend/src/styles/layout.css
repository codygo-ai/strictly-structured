/* ==========================================================================
   Validator / site pages â€“ layout and component styles using design tokens
   ========================================================================== */
.validator-page {
  /* Base styles (background/color) inherited from body in base.css.
     This class is kept as a CSS scoping prefix for child selectors. */
}

.validator-header {
  background: var(--ds-surface);
  border-bottom: 1px solid var(--ds-border);
  padding: 1.25rem var(--ds-content-x);
}

.validator-title {
  font-size: 1.375rem;
  font-weight: 600;
  color: var(--ds-primary);
  letter-spacing: -0.02em;
  margin-bottom: 0.375rem;
}

.validator-subtitle {
  color: var(--ds-secondary);
  font-size: 0.9rem;
  font-weight: 400;
}

.validator-page .editor-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: var(--ds-page);
  min-width: 0;
  min-height: 0;
}

.validator-page .editor-header {
  padding: var(--ds-content-y) var(--ds-content-x) 1rem;
  background: var(--ds-page);
  border-bottom: 1px solid var(--ds-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.validator-page .editor-label {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--ds-muted);
  font-weight: 600;
}

.validator-page .editor-container {
  flex: 1;
  padding: 0.5rem 0.5rem 0.5rem;
  overflow: hidden;
  position: relative;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* Editor bottom bar */
.validator-page .editor-bottom-bar {
  padding: 0.5rem var(--ds-content-x);
  text-align: center;
  font-size: 0.8rem;
  flex-shrink: 0;
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: 0 0 0.5rem 0.5rem;
}

.editor-bottom-trigger {
  background: none;
  border: none;
  padding: 0;
  font: inherit;
  color: var(--ds-accent);
  cursor: pointer;
  text-decoration: underline;
  text-decoration-style: dotted;
  text-underline-offset: 2px;
  transition: color var(--ds-duration);
}
.editor-bottom-trigger:hover {
  color: var(--ds-accent-hover);
}

.editor-bottom-popover {
  position: absolute;
  bottom: calc(100% + 6px);
  left: 50%;
  transform: translateX(-50%);
  top: auto;
  right: auto;
  margin-top: 0;
}

.validator-page .sidebar {
  background: var(--ds-surface);
  border-left: 1px solid var(--ds-border);
  width: var(--ds-sidebar-width);
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.validator-page code {
  background: var(--ds-code-bg);
  padding: 0.125rem 0.375rem;
  border-radius: 3px;
  font-size: 0.9em;
  color: var(--ds-accent);
}

/* ==========================================================================
   Compatibility Dashboard
   ========================================================================== */
.validator-page .status-cards {
  display: flex;
  gap: 0.25rem;
  padding: 0.375rem 0.375rem;
  background: var(--ds-surface);
  border-bottom: 1px solid var(--ds-border);
  flex-shrink: 0;
}

.validator-page .status-card {
  flex: 1;
  cursor: pointer;
  padding: 0.5rem 0.5rem;
  border-radius: var(--ds-radius-sm);
  border: 1px solid transparent;
  background: transparent;
  transition: border-color var(--ds-duration), background-color var(--ds-duration);
  display: flex;
  flex-direction: column;
  gap: 0.125rem;
  text-align: center;
  align-items: center;
}

.validator-page .status-card:hover {
  background: var(--ds-surface-hover);
}

.validator-page .status-card.selected {
  border-color: var(--ds-accent);
  background: var(--ds-surface-active);
}

.validator-page .status-card .status-card-provider {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--ds-muted);
}

.validator-page .status-card.selected .status-card-provider {
  font-weight: 600;
  color: var(--ds-primary);
}

.validator-page .status-card .status-card-status {
  font-size: 0.7rem;
  font-weight: 500;
  margin-top: 0.125rem;
  opacity: 0.5;
}

.validator-page .status-card.selected .status-card-status {
  opacity: 1;
}

.validator-page .status-card .status-card-status.ok { color: var(--ds-success); }
.validator-page .status-card .status-card-status.error { color: var(--ds-error); }
.validator-page .status-card .status-card-status.warning { color: var(--ds-warning); }
.validator-page .status-card .status-card-status.neutral { color: var(--ds-muted); }

/* Dashboard tabs */
.validator-page .dashboard-tabs {
  display: flex;
  border-bottom: 1px solid var(--ds-border);
  background: var(--ds-surface);
  flex-shrink: 0;
  padding: 0;
  gap: 0;
}

.validator-page .dashboard-tab {
  flex: 1;
  padding: 0.625rem 1rem;
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--ds-muted);
  text-align: center;
  cursor: pointer;
  border: none;
  background: transparent;
  border-bottom: 1px solid transparent;
  border-radius: 0;
  transition: color var(--ds-duration), border-color var(--ds-duration), background-color var(--ds-duration);
}

.validator-page .dashboard-tab:hover {
  color: var(--ds-secondary);
  background: var(--ds-surface-hover);
}

.validator-page .dashboard-tab.active {
  color: var(--ds-accent);
  border-bottom-color: var(--ds-accent);
  font-weight: 600;
  background: var(--ds-page);
}

.validator-page .dashboard-tab-content {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  padding: var(--ds-content-y);
  background: var(--ds-page);
}

/* Issue rows */
.validator-page .issue-row {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  padding: 0.5rem 0;
  font-size: 0.8rem;
  line-height: 1.5;
}

.validator-page .issue-row + .issue-row {
  border-top: 1px solid var(--ds-border);
}

.validator-page .issue-row .issue-line {
  font-size: 0.7rem;
  font-family: ui-monospace, monospace;
  color: var(--ds-muted);
  cursor: pointer;
  white-space: nowrap;
  flex-shrink: 0;
  background: none;
  padding: 0;
  border: none;
  transition: color var(--ds-duration);
}

.validator-page .issue-row .issue-line:hover {
  color: var(--ds-accent);
  text-decoration: underline;
}

.validator-page .issue-row .issue-message {
  color: var(--ds-secondary);
}

/* Editor toolbar */
.validator-page .editor-toolbar {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.5rem var(--ds-content-x);
  background: var(--ds-page);
  flex-shrink: 0;
}

/* Examples dropdown */
.validator-page .examples-dropdown {
  position: absolute;
  bottom: 100%;
  left: 0;
  margin-bottom: 0.25rem;
  min-width: 14rem;
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: var(--ds-radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  z-index: 20;
  overflow: hidden;
}

.validator-page .examples-dropdown button {
  display: block;
  width: 100%;
  text-align: left;
  padding: 0.5rem 0.75rem;
  font-size: 0.8rem;
  color: var(--ds-primary);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: background-color var(--ds-duration);
}

.validator-page .examples-dropdown button:hover {
  background: var(--ds-surface-hover);
}

.validator-page .examples-dropdown button .examples-desc {
  display: block;
  font-size: 0.7rem;
  color: var(--ds-muted);
  margin-top: 0.125rem;
}

/* Examples dropdown (editor header) */
.validator-page .examples-dropdown-header {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 0.25rem;
  min-width: 14rem;
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: var(--ds-radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  z-index: 20;
  overflow: hidden;
}

.validator-page .examples-dropdown-header button.load-upload {
  font-weight: 600;
  color: var(--ds-accent);
}

.validator-page .examples-dropdown-divider {
  height: 1px;
  background: var(--ds-border);
  margin: 0.25rem 0;
}

.validator-page .examples-dropdown-section-label {
  padding: 0.375rem 0.75rem 0.125rem;
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--ds-muted);
}

.validator-page .examples-samples-section {
  opacity: 0.45;
  transition: opacity var(--ds-duration);
}
.validator-page .examples-samples-section:hover {
  opacity: 1;
}

.validator-page .examples-samples-scroll {
  max-height: 260px;
  overflow-y: auto;
}

.validator-page .examples-sample-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.5rem;
}

.validator-page .examples-providers {
  display: inline-flex;
  gap: 0.25rem;
  flex-shrink: 0;
}

.validator-page .examples-provider-tag {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}
.validator-page .examples-provider-tag.none {
  background: var(--ds-cell-fail-bg);
  color: var(--ds-cell-fail-text);
}

.validator-page .examples-dropdown-header button {
  display: block;
  width: 100%;
  text-align: left;
  padding: 0.5rem 0.75rem;
  font-size: 0.8rem;
  color: var(--ds-primary);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: background-color var(--ds-duration);
}

.validator-page .examples-dropdown-header button:hover {
  background: var(--ds-surface-hover);
}

.validator-page .examples-dropdown-header button .examples-desc {
  display: block;
  font-size: 0.7rem;
  color: var(--ds-muted);
  margin-top: 0.125rem;
}

/* Feedback popover */
.feedback-popover {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 0.5rem;
  width: 20rem;
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: var(--ds-radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  z-index: 50;
}

/* Help popover */
.help-popover {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 0.5rem;
  width: 18rem;
  padding: 1rem 1.125rem;
  background: var(--ds-surface);
  border: 1px solid var(--ds-border);
  border-radius: var(--ds-radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  z-index: 50;
}

/* Onboarding hint */
.validator-page .onboarding-hint {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem var(--ds-content-x);
  background: var(--ds-accent-bg);
  border-bottom: 1px solid var(--ds-border);
  font-size: 0.8rem;
  color: var(--ds-secondary);
  flex-shrink: 0;
}

.validator-page .onboarding-hint button {
  color: var(--ds-muted);
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 0.875rem;
  padding: 0 0.25rem;
}

.validator-page .onboarding-hint button:hover {
  color: var(--ds-primary);
}

/* ==========================================================================
   Tooltip
   ========================================================================== */
.tooltip-trigger {
  position: relative;
  display: inline-flex;
}

.tooltip-trigger::after {
  content: attr(data-tooltip);
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(4px);
  padding: 0.375rem 0.625rem;
  font-size: 0.75rem;
  font-weight: 500;
  line-height: 1;
  white-space: nowrap;
  color: var(--ds-surface);
  background: var(--ds-primary);
  border-radius: var(--ds-radius-sm);
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--ds-duration) ease, transform var(--ds-duration) ease;
  z-index: 60;
}

.tooltip-trigger::before {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  border: 4px solid transparent;
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--ds-duration) ease;
  z-index: 60;
}

/* Top (default) */
.tooltip-trigger[data-tooltip-pos="top"]::after,
.tooltip-trigger:not([data-tooltip-pos])::after {
  bottom: 100%;
  transform: translateX(-50%) translateY(4px);
}

.tooltip-trigger[data-tooltip-pos="top"]::before,
.tooltip-trigger:not([data-tooltip-pos])::before {
  bottom: 100%;
  border-top-color: var(--ds-primary);
  margin-bottom: -4px;
}

/* Bottom */
.tooltip-trigger[data-tooltip-pos="bottom"]::after {
  top: 100%;
  transform: translateX(-50%) translateY(-4px);
}

.tooltip-trigger[data-tooltip-pos="bottom"]::before {
  top: 100%;
  border-bottom-color: var(--ds-primary);
  margin-top: -4px;
}

/* Show on hover / focus-within */
.tooltip-trigger:hover::after,
.tooltip-trigger:focus-within::after {
  opacity: 1;
}

.tooltip-trigger[data-tooltip-pos="top"]:hover::after,
.tooltip-trigger[data-tooltip-pos="top"]:focus-within::after,
.tooltip-trigger:not([data-tooltip-pos]):hover::after,
.tooltip-trigger:not([data-tooltip-pos]):focus-within::after {
  transform: translateX(-50%) translateY(-4px);
}

.tooltip-trigger[data-tooltip-pos="bottom"]:hover::after,
.tooltip-trigger[data-tooltip-pos="bottom"]:focus-within::after {
  transform: translateX(-50%) translateY(4px);
}

.tooltip-trigger:hover::before,
.tooltip-trigger:focus-within::before {
  opacity: 1;
}
