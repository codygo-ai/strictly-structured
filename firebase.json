{
  "hosting": {
    "site": "structured-output",
    "public": "packages/frontend/out",
    "rewrites": [
      { "source": "/api/validate", "function": "validate" },
      { "source": "/api/fix", "function": "fix" },
      { "source": "/api/evaluate", "function": "evaluate" },
      { "source": "/api/feedback", "function": "feedback" },
      { "source": "/models", "destination": "/models.html" },
      { "source": "/why", "destination": "/why.html" },
      { "source": "/terms", "destination": "/terms.html" }
    ]
  },
  "functions": {
    "source": "packages/backend/.deployed",
    "runtime": "nodejs22",
    "predeploy": [
      "pnpm --filter @ssv/backend set-secrets",
      "pnpm --filter @ssv/backend build",
      "pnpm --filter @ssv/backend deploy --prod --force packages/backend/.deployed",
      "pnpm --filter @ssv/backend strip-dev"
    ]
  },
  "firestore": {
    "rules": "firestore.rules",
    "indexes": "firestore.indexes.json"
  },
  "emulators": {
    "hosting": { "port": 5050 }
  }
}
